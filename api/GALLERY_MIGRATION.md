# –ú–∏–≥—Ä–∞—Ü–∏—è –≥–∞–ª–µ—Ä–µ–∏

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∏–º–ø–æ—Ä—Ç—É –≥–∞–ª–µ—Ä–µ–∏ –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ `gallery.albardaiforness.org`.

## –û–±–∑–æ—Ä

–ì–∞–ª–µ—Ä–µ—è —Å–æ–¥–µ—Ä–∂–∏—Ç –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ Forni Savorgnani (Albaro), –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –∏ —Ç–µ–≥–∞–º.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö
- **–§–∞–π–ª**: `d/gallery.sql`
- **URL —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π**: `https://gallery.albardaiforness.org/uploads/thumb/{filename}`

### –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ

1. **Category** (–ö–∞—Ç–µ–≥–æ—Ä–∏–∏)
   - –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (parent-child)
   - –¢–æ–ª—å–∫–æ –¥–ª—è `server_id = 1` (Albaro)
   - –¢–æ–ª—å–∫–æ –Ω–µ —É–¥–∞–ª–µ–Ω–Ω—ã–µ (`is_deleted = 0`)
   - **–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ**: 165 –∫–∞—Ç–µ–≥–æ—Ä–∏–π

2. **Tag** (–¢–µ–≥–∏)
   - –ü—Ä–æ—Å—Ç—ã–µ –º–µ—Ç–∫–∏ –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
   - **–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ**: 1 —Ç–µ–≥

3. **Media** (–ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã)
   - –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JPG
   - URL —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫: `https://gallery.albardaiforness.org/uploads/thumb/{file_name}`
   - –°–≤—è–∑—å —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
   - **–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ**: 3950 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π

4. **MediaTag** (–°–≤—è–∑–∏ –º–µ–¥–∏–∞-—Ç–µ–≥–∏)
   - –°–≤—è–∑—å –º–Ω–æ–≥–∏–µ-–∫–æ-–º–Ω–æ–≥–∏–º –º–µ–∂–¥—É Media –∏ Tag
   - **–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ**: 0 —Å–≤—è–∑–µ–π

## –ü—Ä–∏–º–µ—Ä—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–π

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- **Al servizio del paese** (–ù–∞ —Å–ª—É–∂–±–µ —Å—Ç—Ä–∞–Ω—ã)
  - Adunate e commemorazioni (–°–æ–±—Ä–∞–Ω–∏—è –∏ –º–µ–º–æ—Ä–∏–∞–ª—ã)
  - Militari (–í–æ–µ–Ω–Ω—ã–µ)
  - Portrait militari (–í–æ–µ–Ω–Ω—ã–µ –ø–æ—Ä—Ç—Ä–µ—Ç—ã)
  - Carabinieri, Vigili, Forestale (–ö–∞—Ä–∞–±–∏–Ω–µ—Ä—ã, –ø–æ–ª–∏—Ü–∏—è, –ª–µ—Å–Ω–∏–∫–∏)

- **Gente di paese** (–õ—é–¥–∏ –¥–µ—Ä–µ–≤–Ω–∏)
  - 1 donna / 1 uomo (1 –∂–µ–Ω—â–∏–Ω–∞ / 1 –º—É–∂—á–∏–Ω–∞)
  - Gruppo donne / Gruppo uomini (–ì—Ä—É–ø–ø—ã –∂–µ–Ω—â–∏–Ω/–º—É–∂—á–∏–Ω)
  - Coppia miste (–°–º–µ—à–∞–Ω–Ω—ã–µ –ø–∞—Ä—ã)
  - Portrait uomini / Portrait donne (–ú—É–∂—Å–∫–∏–µ/–∂–µ–Ω—Å–∫–∏–µ –ø–æ—Ä—Ç—Ä–µ—Ç—ã)
  - I nuostris vecius (–ù–∞—à–∏ —Å—Ç–∞—Ä–∏–∫–∏)

- **Famiglie** (–°–µ–º—å–∏)
  - Marito & moglie (–ú—É–∂ –∏ –∂–µ–Ω–∞)
  - Fratelli & sorelle (–ë—Ä–∞—Ç—å—è –∏ —Å–µ—Å—Ç—Ä—ã)
  - Genitori & figli (–†–æ–¥–∏—Ç–µ–ª–∏ –∏ –¥–µ—Ç–∏)
  - Nonni & nipoti (–î–µ–¥—É—à–∫–∏/–±–∞–±—É—à–∫–∏ –∏ –≤–Ω—É–∫–∏)
  - Foto di famiglia (–°–µ–º–µ–π–Ω—ã–µ —Ñ–æ—Ç–æ)
  - Matrimoni & Anniversari (–°–≤–∞–¥—å–±—ã –∏ –≥–æ–¥–æ–≤—â–∏–Ω—ã)

- **Forni & panorami** (Forni –∏ –ø–∞–Ω–æ—Ä–∞–º—ã)
  - Frazione Andrazza
  - Frazione Vico
  - Frazione Cella
  - Panorami fuori paese (–ü–∞–Ω–æ—Ä–∞–º—ã –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –¥–µ—Ä–µ–≤–Ω–∏)
  - Disegni Forni (–†–∏—Å—É–Ω–∫–∏ Forni)

- **Svago** (–î–æ—Å—É–≥)
  - Balli e musica (–¢–∞–Ω—Ü—ã –∏ –º—É–∑—ã–∫–∞)
  - Coscritti (–ü—Ä–∏–∑—ã–≤–Ω–∏–∫–∏)
  - Gite fuori porta (–ü–æ–µ–∑–¥–∫–∏ –∑–∞ –≥–æ—Ä–æ–¥)
  - Carnevale (–ö–∞—Ä–Ω–∞–≤–∞–ª)
  - Tutti Sportivi (–í—Å–µ —Å–ø–æ—Ä—Ç—Å–º–µ–Ω—ã)
  - Ski tai peis (–õ—ã–∂–∏ –≤ –¥–µ—Ä–µ–≤–Ω–µ)
  - Cres & scaladas (–ü–æ—Ö–æ–¥—ã –∏ –≤–æ—Å—Ö–æ–∂–¥–µ–Ω–∏—è)
  - Caccia (–û—Ö–æ—Ç–∞)

- **Usanze e Tradizioni** (–û–±—ã—á–∞–∏ –∏ —Ç—Ä–∞–¥–∏—Ü–∏–∏)
  - Battesimi, 1¬∞ Comunione & Cresima (–ö—Ä–µ—â–µ–Ω–∏—è, –ø–µ—Ä–≤–æ–µ –ø—Ä–∏—á–∞—Å—Ç–∏–µ –∏ –∫–æ–Ω—Ñ–∏—Ä–º–∞—Ü–∏—è)
  - Avvenimenti religiosi (–†–µ–ª–∏–≥–∏–æ–∑–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è)
  - Ricordini a lutto (–¢—Ä–∞—É—Ä–Ω—ã–µ –ø–∞–º—è—Ç–∫–∏)
  - Funerali (–ü–æ—Ö–æ—Ä–æ–Ω—ã)
  - Cimitero (–ö–ª–∞–¥–±–∏—â–µ)

- **Corrispondenze** (–ö–æ—Ä—Ä–µ—Å–ø–æ–Ω–¥–µ–Ω—Ü–∏—è)
  - Cartoline fuori paese (–û—Ç–∫—Ä—ã—Ç–∫–∏ –∏–∑-–∑–∞ –ø—Ä–µ–¥–µ–ª–æ–≤ –¥–µ—Ä–µ–≤–Ω–∏)
  - Cartoline frazione Andrazza/Cella/Vico (–û—Ç–∫—Ä—ã—Ç–∫–∏ –∏–∑ —Ñ—Ä–∞–∫—Ü–∏–π)
  - Corrispondenza varie & estero (–†–∞–∑–ª–∏—á–Ω–∞—è –∫–æ—Ä—Ä–µ—Å–ø–æ–Ω–¥–µ–Ω—Ü–∏—è –∏ –∏–∑-–∑–∞ —Ä—É–±–µ–∂–∞)

- **Emigrazione** (–≠–º–∏–≥—Ä–∞—Ü–∏—è)
  - Europa
  - Nord America
  - Sud America (Argentina, Brasile)
  - Australia & NZ
  - Africa

- **Lavoro** (–†–∞–±–æ—Ç–∞)
  - In quota (–ù–∞ –≤—ã—Å–æ—Ç–µ)
  - Ta la vila (–í –¥–µ—Ä–µ–≤–Ω–µ)
  - In mont (–í –≥–æ—Ä–∞—Ö)
  - Segheria Bricchetti (–õ–µ—Å–æ–ø–∏–ª–∫–∞ Bricchetti)
  - Ciamps & bulitins (–ü–æ–ª—è –∏ –ø–∞—Å—Ç–±–∏—â–∞)
  - Las fontanas (–§–æ–Ω—Ç–∞–Ω—ã)

- **Documenti** (–î–æ–∫—É–º–µ–Ω—Ç—ã)
  - Doc. Identit√† femminili/maschili (–ñ–µ–Ω—Å–∫–∏–µ/–º—É–∂—Å–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã)
  - Documenti diversi (–†–∞–∑–ª–∏—á–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã)
  - Documenti guardia campestre (–î–æ–∫—É–º–µ–Ω—Ç—ã —Å–µ–ª—å—Å–∫–æ–π –æ—Ö—Ä–∞–Ω—ã)

- **Libri & pubblicazioni** (–ö–Ω–∏–≥–∏ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏)
  - –†–∞–∑–ª–∏—á–Ω—ã–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –∫–Ω–∏–≥–∏ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –æ Forni Savorgnani

## –ö–æ–º–∞–Ω–¥—ã –º–∏–≥—Ä–∞—Ü–∏–∏

### –ò–º–ø–æ—Ä—Ç –≥–∞–ª–µ—Ä–µ–∏
```bash
cd api
npm run migrate:gallery
```

### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç

1. **–ü–∞—Ä—Å–∏–Ω–≥ SQL –¥–∞–º–ø–∞**
   - –ß–∏—Ç–∞–µ—Ç —Ñ–∞–π–ª `d/gallery.sql`
   - –ò–∑–≤–ª–µ–∫–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ INSERT statements
   - –§–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ `server_id = 1` –∏ `is_deleted = 0`

2. **–ò–º–ø–æ—Ä—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–π**
   - –°–æ–∑–¥–∞–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∏–µ—Ä–∞—Ä—Ö–∏–∏
   - –°–≤—è–∑—ã–≤–∞–µ—Ç —Å —Å–µ—Ä–≤–µ—Ä–æ–º Albaro
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –º–∞–ø–ø–∏–Ω–≥ —Å—Ç–∞—Ä—ã—Ö ID ‚Üí –Ω–æ–≤—ã—Ö ID

3. **–ò–º–ø–æ—Ä—Ç —Ç–µ–≥–æ–≤**
   - –°–æ–∑–¥–∞–µ—Ç —Ç–µ–≥–∏ –≤ –Ω–æ–≤–æ–π —Å—Ö–µ–º–µ
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –º–∞–ø–ø–∏–Ω–≥ ID

4. **–ò–º–ø–æ—Ä—Ç –º–µ–¥–∏–∞—Ñ–∞–π–ª–æ–≤**
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç batch-–æ–ø–µ—Ä–∞—Ü–∏–∏ (–ø–æ 100 –∑–∞–ø–∏—Å–µ–π)
   - –§–æ—Ä–º–∏—Ä—É–µ—Ç URL: `https://gallery.albardaiforness.org/uploads/thumb/{filename}`
   - –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –º–µ–¥–∏–∞ –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é —Ñ–∞–π–ª–∞
   - –°–≤—è–∑—ã–≤–∞–µ—Ç —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
   - –í—Å–µ —Ñ–∞–π–ª—ã –ø–æ–º–µ—á–∞—é—Ç—Å—è –∫–∞–∫ –ø—É–±–ª–∏—á–Ω—ã–µ (`isPublic: true`)

5. **–ò–º–ø–æ—Ä—Ç —Å–≤—è–∑–µ–π –º–µ–¥–∏–∞-—Ç–µ–≥–∏**
   - –°–æ–∑–¥–∞–µ—Ç —Å–≤—è–∑–∏ –º–µ–∂–¥—É –º–µ–¥–∏–∞—Ñ–∞–π–ª–∞–º–∏ –∏ —Ç–µ–≥–∞–º–∏

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

–°–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç batch-–æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –∏–º–ø–æ—Ä—Ç–∞:
- –ú–µ–¥–∏–∞—Ñ–∞–π–ª—ã –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø–∞–∫–µ—Ç–∞–º–∏ –ø–æ 100 –∑–∞–ø–∏—Å–µ–π
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `Promise.all()` –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –ü—Ä–∏ –æ—à–∏–±–∫–µ –±–∞—Ç—á–∞, –∑–∞–ø–∏—Å–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ –æ–¥–Ω–æ–π

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–º–ø–æ—Ä—Ç–∞

```
üìä Summary:
  - Categories: 165
  - Tags: 1
  - Media files: 3950
  - Media-Tag relations: 0
```

## –î–æ—Å—Ç—É–ø –∫ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º

–í—Å–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ –ø—Ä—è–º—ã–º URL:
```
https://gallery.albardaiforness.org/uploads/thumb/{filename}
```

–ù–∞–ø—Ä–∏–º–µ—Ä:
```
https://gallery.albardaiforness.org/uploads/thumb/62922cf80c730.jpg
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –≥–∞–ª–µ—Ä–µ–µ

–ü–æ—Å–ª–µ –∏–º–ø–æ—Ä—Ç–∞ –≤—Å–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –Ω–æ–≤–æ–π –≥–∞–ª–µ—Ä–µ–µ:
- **URL**: `https://new.albardaiforness.org/gallery`
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è** –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- **–ü–æ–∏—Å–∫** –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏ –æ–ø–∏—Å–∞–Ω–∏—é
- **–ü—Ä–æ—Å–º–æ—Ç—Ä** –ø–æ–ª–Ω–æ—Ä–∞–∑–º–µ—Ä–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. **–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –æ—Å—Ç–∞—é—Ç—Å—è –Ω–∞ —Å—Ç–∞—Ä–æ–º –¥–æ–º–µ–Ω–µ** - –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏ URL
2. **–í—Å–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –ø—É–±–ª–∏—á–Ω—ã–µ** - –¥–æ—Å—Ç—É–ø–Ω—ã –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
3. **–ò–µ—Ä–∞—Ä—Ö–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞** - parent-child –æ—Ç–Ω–æ—à–µ–Ω–∏—è
4. **–¢–µ–≥–∏ –ø–æ–∫–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è** - –≤ –¥–∞–º–ø–µ —Ç–æ–ª—å–∫–æ 1 —Ç–µ–≥
5. **–°–≤—è–∑—å —Å –ø–µ—Ä—Å–æ–Ω–∞–º–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç** - —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω–∞—è –≥–∞–ª–µ—Ä–µ—è, –Ω–µ —Å–≤—è–∑–∞–Ω–Ω–∞—è —Å –≥–µ–Ω–µ–∞–ª–æ–≥–∏—á–µ—Å–∫–∏–º –¥—Ä–µ–≤–æ–º

## Troubleshooting

### –û—à–∏–±–∫–∞ "serverId is missing"
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ —Å—Ö–µ–º–µ Prisma —É –º–æ–¥–µ–ª–∏ `Category` –µ—Å—Ç—å –ø–æ–ª–µ `serverId`.

### –ú–µ–¥–ª–µ–Ω–Ω—ã–π –∏–º–ø–æ—Ä—Ç
–°–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç batch-–æ–ø–µ—Ä–∞—Ü–∏–∏, –Ω–æ –∏–º–ø–æ—Ä—Ç 3950 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç.

### –î—É–±–ª–∏–∫–∞—Ç—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–π
–ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –∑–∞–ø—É—Å–∫–µ —Å–∫—Ä–∏–ø—Ç–∞ –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã. –û—á–∏—Å—Ç–∏—Ç–µ —Ç–∞–±–ª–∏—Ü—ã –ø–µ—Ä–µ–¥ –ø–æ–≤—Ç–æ—Ä–Ω—ã–º –∏–º–ø–æ—Ä—Ç–æ–º:
```sql
DELETE FROM media WHERE categoryId IN (SELECT id FROM categories WHERE serverId = 1);
DELETE FROM categories WHERE serverId = 1;
DELETE FROM tags;
```

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 2025-12-23

